# OTUS_Final_Project
The final project of the Python QA Engineer course


#  Проект по тестированию VPN + IDS

##  Цель проекта
Построить тестовый стенд и написать автотесты для проверки корректности работы **VPN (WireGuard)** в связке с **IDS (Intrusion Detection System)**.

---

##  Описание

В данном проекте реализовано следующее:

- Развернут **WireGuard** как сервер в Docker-контейнере.
- WireGuard настроен для работы в двух сетях:
  - `external_net` — внешняя сеть, откуда осуществляется подключение к VPN.
  - `internal_net` — защищённая внутренняя сеть.
- В сети `internal_net` запущен тестовый web-сервер **Nginx**, доступный только через VPN.
- В сети `external_net` запущен контейнер с тестовой средой, из которого выполняются автотесты.
- Тесты проверяют:
  - Доступность Nginx без VPN.
  - Установленное соединение с помощью `wg show`.
  - Доступность Nginx через VPN.
  - Корректность маршрутизации (`ip route`).
  - Состояние соединения на стороне сервера (через библиотеку [paramiko](https://pypi.org/project/paramiko/)).

---

##  Используемые технологии

- **Docker Compose** — для разворачивания стенда.
- **WireGuard** — для организации VPN.
- **Nginx** — в роли тестового сервиса в защищённой сети.
- **Python / Pytest** — для написания автотестов.
- **Paramiko** — для удалённого выполнения команд на сервере.
- **Allure** — для генерации HTML-отчётов по результатам тестирования.

---

##  Структура проекта

```
project/
├── docker-compose.yml        # Файл для разворачивания стенда
├── tests/
│   ├── conftest.py           # Общие фикстуры для тестов
│   └── test_vpn.py  # Автотесты
├── README.md                 # Этот файл
└── allure-results/           # Результаты тестов
└── allure-report/            # Allure-отчёты
```

---


### 3. Запуск стенда:
```bash
docker-compose up -d
```

### 4. Запуск тестов:
```bash
pytest tests/test_vpn.py -v --alluredir=./reports/
```

### 5. Просмотр отчёта:
```bash
allure serve ./allure-results
```

---

##  Выполненные критерии оценки

| Критерий | Выполнено |
|---------|-----------|
| Наличие `docker-compose.yml` | ✅ |
| Реализация указанных тестов | ✅ |
| Настройка отчётности (Allure) | ✅ |

---

##  Примеры тестов

Тесты проверяют:

- Что Nginx недоступен без VPN.
- Что при подключении к VPN клиент видит интерфейс `wg0`.
- Что после подключения к VPN Nginx становится доступным.
- Что маршрут через `wg0` добавлен в таблицу маршрутов.
- Что на стороне сервера отображается установленное соединение через `wg show`.

